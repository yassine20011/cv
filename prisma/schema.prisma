// schema.prisma

generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider  = "postgresql"
    url       = env("DATABASE_URL") // uses connection pooling
}

model User {
    id        Int      @id @default(autoincrement())
    email     String   @unique
    name      String?
    resume    Resume[]
    createdAt DateTime @default(now())
}

model Resume {
    id                 Int         @id @default(autoincrement())
    subdomain          String      @unique
    userId             Int
    user               User        @relation(fields: [userId], references: [id])
    name               String
    initials           String
    location           String
    locationLink       String
    about              String
    summary            String
    avatarUrl          String
    personalWebsiteUrl String
    email              String
    tel                String
    linkedin           String
    github             String
    twitter            String
    education          Education[]
    work               Work[]
    skills             String[]
    projects           Project[]
}

model Education {
    id            Int      @id @default(autoincrement())
    instituteName String
    degree        String
    startDate     DateTime
    endDate       DateTime
    resume        Resume   @relation(fields: [resumeId], references: [id])
    resumeId      Int
}

model Work {
    id             Int      @id @default(autoincrement())
    companyName    String
    companyWebsite String
    badges         String[]
    position       String
    startDate      DateTime
    endDate        DateTime
    jobDescription String
    resume         Resume   @relation(fields: [resumeId], references: [id])
    resumeId       Int
}

model Project {
    id                 Int      @id @default(autoincrement())
    projectName        String
    techStack          String[]
    projectDescription String
    url                String
    resume             Resume   @relation(fields: [resumeId], references: [id])
    resumeId           Int
}
